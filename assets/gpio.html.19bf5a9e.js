import{r as o,o as r,c as i,a as n,b as a,F as l,e as s,d as t}from"./app.71086382.js";import{_ as p}from"./plugin-vue_export-helper.21dcd24c.js";const c={},u=n("h1",{id:"gpio",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#gpio","aria-hidden":"true"},"#"),s(" GPIO")],-1),d=s("The "),h={href:"https://en.wikipedia.org/wiki/General-purpose_input/output",target:"_blank",rel:"noopener noreferrer"},b=s("general-purpose input/output"),m=s(" (GPIO) integration allows you to integrate devices that are directly connected to GPIO pins, for example "),k={href:"https://en.wikipedia.org/wiki/Passive_infrared_sensor",target:"_blank",rel:"noopener noreferrer"},_=s("PIR motion sensors"),g=s(". It makes uses of the "),y={href:"https://www.kernel.org/doc/Documentation/gpio/sysfs.txt",target:"_blank",rel:"noopener noreferrer"},f=s("GPIO Sysfs Interface"),w=s(" and therefore only works on Linux."),v=t(`<h2 id="requirements" tabindex="-1"><a class="header-anchor" href="#requirements" aria-hidden="true">#</a> Requirements</h2><h3 id="running-with-nodejs" tabindex="-1"><a class="header-anchor" href="#running-with-nodejs" aria-hidden="true">#</a> Running with NodeJS</h3><p>The user under which room-assistant is running needs to have access to the GPIO pins. Under Raspbian this can be granted by adding the user to the <code>gpio</code> group:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> adduser <span class="token environment constant">$USER</span> gpio
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="running-with-docker" tabindex="-1"><a class="header-anchor" href="#running-with-docker" aria-hidden="true">#</a> Running with Docker</h3><p>The <code>/sys</code> folder of the host needs to be mapped into the container like shown below.</p><details class="custom-container details"><summary>Example docker-compose.yml</summary><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">room-assistant</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mkerix/room<span class="token punctuation">-</span>assistant
    <span class="token key atrule">network_mode</span><span class="token punctuation">:</span> host
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /var/run/dbus<span class="token punctuation">:</span>/var/run/dbus
      <span class="token punctuation">-</span> /sys<span class="token punctuation">:</span>/sys
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">NODE_CONFIG</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
        {
          &quot;global&quot;: {
            &quot;instanceName&quot;: &quot;changeme&quot;,
            &quot;integrations&quot;: [&quot;gpio&quot;]
          },
          &quot;gpio&quot;: {
            &quot;binarySensors&quot;: [
              { &quot;name&quot;: &quot;PIR Sensor&quot;, &quot;pin&quot;: 17 }
            ]
          }
        }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></details><h2 id="settings" tabindex="-1"><a class="header-anchor" href="#settings" aria-hidden="true">#</a> Settings</h2><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>binarySensors</code></td><td><a href="#binary-sensors">GPIO Binary Sensors</a></td><td></td><td>Array of binary sensor configurations.</td></tr><tr><td><code>switches</code></td><td><a href="#switches">GPIO Switches</a></td><td></td><td>Array of switch configurations.</td></tr></tbody></table><h3 id="binary-sensors" tabindex="-1"><a class="header-anchor" href="#binary-sensors" aria-hidden="true">#</a> Binary Sensors</h3>`,10),q=n("thead",null,[n("tr",null,[n("th",null,"Name"),n("th",null,"Type"),n("th",null,"Default"),n("th",null,"Description")])],-1),x=n("tr",null,[n("td",null,[n("code",null,"name")]),n("td",null,"String"),n("td"),n("td",null,"Friendly name for this sensor.")],-1),S=n("tr",null,[n("td",null,[n("code",null,"pin")]),n("td",null,"Number"),n("td"),n("td",null,"Number of the GPIO pin that should be tracked.")],-1),I=n("td",null,[n("code",null,"deviceClass")],-1),N=n("td",null,"String",-1),P=n("td",null,null,-1),G=s("Home Assistant Core "),O={href:"https://www.home-assistant.io/integrations/binary_sensor/#device-class",target:"_blank",rel:"noopener noreferrer"},D=s("device class"),E=s(" that the sensor should be shown as."),C=t(`<h3 id="switches" tabindex="-1"><a class="header-anchor" href="#switches" aria-hidden="true">#</a> Switches</h3><table><thead><tr><th>Name</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>String</td><td></td><td>Friendly name for this sensor.</td></tr><tr><td><code>pin</code></td><td>Number</td><td></td><td>Number of the GPIO pin that should be used as output.</td></tr><tr><td><code>icon</code></td><td>String</td><td></td><td>Icon to display for the switch in the Home Assistant Core frontend.</td></tr></tbody></table><details class="custom-container details"><summary>Example Config</summary><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">integrations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> gpio
<span class="token key atrule">gpio</span><span class="token punctuation">:</span>
  <span class="token key atrule">binarySensors</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Bedroom Motion Sensor
      <span class="token key atrule">pin</span><span class="token punctuation">:</span> <span class="token number">17</span>
      <span class="token key atrule">deviceClass</span><span class="token punctuation">:</span> motion
  <span class="token key atrule">switches</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> LED
      <span class="token key atrule">pin</span><span class="token punctuation">:</span> <span class="token number">18</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details>`,3);function R(T,B){const e=o("ExternalLinkIcon");return r(),i(l,null,[u,n("p",null,[d,n("a",h,[b,a(e)]),m,n("a",k,[_,a(e)]),g,n("a",y,[f,a(e)]),w]),v,n("table",null,[q,n("tbody",null,[x,S,n("tr",null,[I,N,P,n("td",null,[G,n("a",O,[D,a(e)]),E])])])]),C],64)}var L=p(c,[["render",R]]);export{L as default};
